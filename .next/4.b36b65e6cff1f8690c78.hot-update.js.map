{"version":3,"file":"4.b36b65e6cff1f8690c78.hot-update.js","sources":["webpack:///components/BetaForm.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Form } from 'semantic-ui-react';\nimport axios from 'axios';\nimport Router from 'next/router';\nlet referralCode;\n\nclass BetaForm extends Component {\n  state = {\n    fname: '',\n    email: '',\n    loading: false\n  };\n\n  onSubmit = event => {\n    event.preventDefault();\n    this.setState({loading: true});\n\n    const vl_header = {headers: { \"Content-Type\": \"application/json\" }};\n    const vl_user = {\n      \"params\": {\n        \"event\": \"registration\",\n        \"user\": {\n            \"firstname\": this.state.fname,\n            \"email\": this.state.email\n        },\n        \"referrer\": {\n            \"referralCode\": \"\",\n            \"email\": \"\"\n        },\n        \"refSource\": \"\"\n    },\n    \"apiToken\": this.props.config.viralLoopAPI\n    }\n\n\n    axios.post(`https://app.viral-loops.com/api/v2/events`, vl_user, vl_header)\n    .then(res => {\n      referralCode = res.data.referralCode;\n\n    })\n    .then(() =>  {\n      axios({\n      method: 'post',\n      url: this.props.config.mailchimp_members_endpoint,\n      data: {\n       \"email_address\": this.state.email,\n       \"status\": \"subscribed\",\n        \"merge_fields\": {\n              \"FNAME\": this.state.fname,\n              \"LANGUAGE\": \"EN\",\n              \"RCODE\": referralCode\n        }\n      },\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: \"apikey \" + this.props.config.mailchimp_api,\n      },\n\n    });\n\n      // this.setState({loading: false});\n      // Router.push({\n      //   pathname: '/ThankYou',\n      //   query: { referralCode: referralCode }\n      // })\n    });\n  };\n\n  render (){\n    console.log(this.props.config);\n    return (\n      <Form onSubmit={this.onSubmit}>\n        <Form.Group widths=\"equal\">\n          <Form.Input fluid\n            placeholder='First name'\n            value={this.state.fname}\n            onChange={event => this.setState({fname: event.target.value})}\n            />\n          <Form.Input fluid\n            placeholder='Email'\n            value={this.state.email}\n            onChange={event => this.setState({email: event.target.value})}\n           />\n          <Form.Button color='orange' loading={this.state.loading}>Invite me!</Form.Button>\n        </Form.Group>\n      </Form>\n  )}\n}\n\nexport default BetaForm;\n\n\n\n// WEBPACK FOOTER //\n// components/BetaForm.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AAHA;;;;;AAMA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AAFA;AAIA;AAVA;AAYA;AAbA;AAiBA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAHA;AASA;AACA;AACA;AAFA;AAZA;AAoBA;AACA;AACA;AACA;AACA;AACA;;;;;;AAEA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;;;;;;;;AAhFA;AACA;AAkFA;AAAA;;;;;;;;;;;;AArFA;AAEA;;;;;;;;;;A","sourceRoot":""}