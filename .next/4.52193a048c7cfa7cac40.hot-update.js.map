{"version":3,"file":"4.52193a048c7cfa7cac40.hot-update.js","sources":["webpack:///components/BetaForm.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { Form } from 'semantic-ui-react';\nimport axios from 'axios';\nimport Router from 'next/router';\nlet referralCode;\n\nclass BetaForm extends Component {\n  state = {\n    fname: '',\n    email: '',\n    loading: false\n  };\n\n  onSubmit = event => {\n    event.preventDefault();\n    this.setState({loading: true});\n\n    const vl_header = {headers: { \"Content-Type\": \"application/json\" }};\n    const vl_user = {\n      \"params\": {\n        \"event\": \"registration\",\n        \"user\": {\n            \"firstname\": this.state.fname,\n            \"email\": this.state.email,\n            \"lanuage\": \"EN\"\n        },\n        \"referrer\": {\n            \"referralCode\": \"\",\n            \"email\": \"\"\n        },\n        \"refSource\": \"\"\n    },\n    \"apiToken\": this.props.config.viralLoopAPI\n    }\n\n    axios.post(`https://app.viral-loops.com/api/v2/events`, vl_user, vl_header)\n    .then(res => {\n      referralCode = res.data.referralCode;\n    })\n    .then(() =>  {\n      const mc_header = {headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `apikey: ${this.props.config.mailchimp_api}`\n      }};\n      const mc_body = {\n             \"email_address\": this.state.email,\n             \"status\": \"subscribed\",\n              \"merge_fields\": {\n                    \"FNAME\": this.state.fname,\n                    \"LANGUAGE\": \"EN\",\n                    \"RCODE\": referralCode\n              }\n            }\n\n      axios.post(this.props.config.mailchimp_members_endpoint, mc_body, mc_header)\n    })\n    .then((res) => {\n      console.log(res);\n      this.setState({loading: false});\n      Router.push({\n        pathname: '/ThankYou',\n        query: { referralCode: referralCode }\n      })\n    })\n  };\n\n  render (){\n    return (\n      <Form onSubmit={this.onSubmit}>\n        <Form.Group widths=\"equal\">\n          <Form.Input fluid\n            placeholder='First name'\n            value={this.state.fname}\n            onChange={event => this.setState({fname: event.target.value})}\n            />\n          <Form.Input fluid\n            placeholder='Email'\n            value={this.state.email}\n            onChange={event => this.setState({email: event.target.value})}\n           />\n          <Form.Button color='orange' loading={this.state.loading}>Invite me!</Form.Button>\n        </Form.Group>\n      </Form>\n  )}\n}\n\nexport default BetaForm;\n\n\n\n// WEBPACK FOOTER //\n// components/BetaForm.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AACA;AACA;AACA;AACA;AAHA;;;;;AAMA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAFA;AAIA;AAXA;AAaA;AAdA;AAiBA;AAEA;AACA;AAEA;AAAA;AACA;AACA;AAFA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAHA;AAUA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAFA;AAIA;AACA;;;;;;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAHA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;;;;;;;;AA7EA;AACA;AA+EA;AAAA;;;;;;;;;;;;AAlFA;AAEA;;;;;;;;;;A","sourceRoot":""}